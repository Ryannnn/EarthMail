*** Settings ***
Library  earth.mail.testlib.CheckMail
Library  Selenium2Library
Test Teardown     Close Browser


*** Test Cases ***
Send mail and validate
    [Template]  Send mail and validate
    csdTopic  foamtea30@gmail.com,csd@chaifeng.com  Body

*** Variables ***  
${URL}     http://localhost:8080/EarthMail/ 

*** Keywords ***
Send mail and validate
    [Arguments]  ${topic}  ${recipients}  ${body}
    Send mail  ${topic}  ${recipients}  ${body}
    Check mail  ${recipients}  ${topic}  ${body}  iamnotman88@126.com

Send mail
    [Arguments]  ${topic}  ${recipients}  ${body}
    Open Browser  ${URL}
    Input Text  topic  ${topic}
    Input Text  recipients  ${recipients}
    Input Text  body  ${body}
    
    Click Button  send
    Page Should contain  send success 

Check mail
    [Arguments]    ${sender}
    Mail Exists  ${sender}

